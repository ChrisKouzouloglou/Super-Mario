<!DOCTYPE HTML>
<html>
<head>
<title>Super-Mario</title>
<meta charset="utf-8">
<style>
body {
	margin: 0;
	padding: 0;
	background-color: #000;
}
</style>
<script src="Menu.js"></script>
<script src="Stage1.js"></script>
<script src="//cdn.jsdelivr.net/phaser/2.6.2/phaser.min.js"></script>
</head>
<body>
	<script type="text/javascript">
		var game = new Phaser.Game(256, 240, Phaser.CANVAS, this, false, false);



		var points=0;
		var lives=1;

		
		//xar
		var lvltext;
		var endtext;
		var style = { font: "bold 20px Arial", fill: "#40ff00", boundsAlignH: "center", boundsAlignV: "middle" };
		var style2 = { font: "bold 20px Arial", fill: "#40ff00", boundsAlignH: "center", boundsAlignV: "middle" };
		
		//Game Sounds
		var ENDCOIN;
		var jump;
		var stomp;
		var theme;
		
		//Other
		
		

        game.state.add('Stage1', Stage1);
		//game.state.add('S2', S2);
		game.state.add('Menu', Menu);
		game.state.start('Menu');


		function preload() {

			//  We need this because the assets are on github pages
			//  Remove the next 2 lines if running locally
			this.load.baseURL = 'https://ChrisKouzouloglou.github.io/Super-Mario/';
			this.load.crossOrigin = 'anonymous';
			
		}




		

        var music;
		
		
		
		function coinOverlap(player, coin) {

            var co;

            co=game.add.audio('coin');
            co.play();

            coin.kill();

            points+=1;
            text.text= "Points:" + points + '/63';
		}

		function goombaOverlap(player, goomba) {

              var goom;

            goom=game.add.audio('stomp');
            goom.play();

			if (player.body.touching.down) {
				goomba.animations.stop();
				goomba.frame = 2;
				goomba.body.enable = false;
				player.body.velocity.y = -80;
				game.time.events.add(Phaser.Timer.SECOND, function() {
					goomba.kill();
				});
			} else {
				player.frame = 6;
				player.body.enable = false;
				player.animations.stop();
                music.stop();
				if (lives>=1) {
					lives--;
					points=0;

					game.state.start(game.state.current);

				}
				game.time.events.add(Phaser.Timer.SECOND * 3, function() {
					game.paused = true;
				});
			}
		}

         /*    
         function TheEnd(){
			theme.stop();
			var style5 = { font: "bold 80px Roman", fill: "#4bb84b", boundsAlignH: "center", boundsAlignV: "middle" };
			var style = { font: "bold 70px Arial", fill: "#FFA500", boundsAlignH: "center", boundsAlignV: "middle" };
			endtext = game.add.text(100, 100, "Nice man , you did it !", style5);
			endtext.fixedToCamera=true; 
			text.fixedToCamera=true;
			ends.play();
			player.body.enable = false;
			player.animations.stop();
			game.time.events.add(Phaser.Timer.SECOND * 8, function() {
			game.stage.backgroundColor = '#000000';	
			lives = 2
			score = 0;
			game.state.start('MENU');
				});
		}   */


       /*
		function endcoinCollide(player,endcoin ){
			endcoin.kill();
			endcoin.body.enable = false;
			game.time.events.add(Phaser.Timer.SECOND * 3, function() {
		    game.paused = true;
		
		} */


				function turtleOverlap(player, turtle) {

              var turt;

            turt=game.add.audio('stomp');
            turt.play();

			if (player.body.touching.down) {
				turtle.animations.stop();
				turtle.frame = 2;
				turtle.body.enable = false;
				player.body.velocity.y = -80;
				game.time.events.add(Phaser.Timer.SECOND, function() {
					turtle.kill();
				});
			} else {
				player.frame = 6;
				player.body.enable = false;
				player.animations.stop();
                music.stop();
				if (lives>=1) {
					lives--;
					points=0;

					game.state.start(game.state.current);

				}
				game.time.events.add(Phaser.Timer.SECOND * 3, function() {
					game.paused = true;
				});
			}
		} 
	</script>
</body>
</html>
